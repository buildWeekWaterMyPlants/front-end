(this.webpackJsonpwatermyplants=this.webpackJsonpwatermyplants||[]).push([[0],{214:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n(35),r=n.n(c),s=(n(91),n(92),n(13)),o=n(5),i=n(2),l=n(19),u=n(3),j=function(e){var t=Object(a.useState)(e),n=Object(i.a)(t,2),c=n[0],r=n[1];return[c,function(e){var t=e.target,n=t.type,a=t.name,s=t.value,o=t.checked,i="checkbox"===n?o:s;r(Object(u.a)(Object(u.a)({},c),{},Object(l.a)({},a,i)))},function(){r(e)}]},d=n(7),b=n(23),h=n.n(b),p=function(){var e=localStorage.getItem("token");return h.a.create({headers:{Authorization:e},baseURL:"https://watermyplantsbuildweek.herokuapp.com"})},O="CHECK_AUTHORIZATION",m="START_REQUEST",f="AUTHENTICATE",x="FAILED_REQUEST",y="FINISH_REQUEST",v="UPDATE_PLANT",g="GET_PLANTS",w="GET_PLANT",N="DELETE_PLANT",k="ADD_PLANT",S=function(e){return function(t){t({type:m}),p().put("/api/user",e).then((function(e){t({type:"UPDATE_USER",payload:e.data})})).catch((function(e){t({type:x,payload:e})})).finally((function(){t({type:y})}))}},E="LOGOUT",q=n(6),T=function(e,t,n){var c=Object(a.useState)({}),r=Object(i.a)(c,2),s=r[0],o=r[1],j=Object(a.useState)(!0),d=Object(i.a)(j,2),b=d[0],h=d[1];return Object(a.useEffect)((function(){t.isValid(e).then((function(e){return h(!e)}))}),[e,t]),[b,s,function(e){n(e);var a=e.target,c=a.value,r=a.type,i=a.name,j=a.checked;!function(e,n){q.c(t,e).validate(n).then((function(){return o(Object(u.a)(Object(u.a)({},s),{},Object(l.a)({},e,"")))})).catch((function(t){return o(Object(u.a)(Object(u.a)({},s),{},Object(l.a)({},e,t.errors[0])))}))}(i,"checkbox"===r?j:c)}]},C=q.b().shape({username:q.d().required("Username is required"),password:q.d().required("Password is required")}),U=n(0);function A(e){var t=e.formErrors;return Object(U.jsx)("div",{children:Object.keys(t).map((function(e,n){return Object(U.jsx)("div",{className:"text-red-500",children:t[e]},n)}))})}var L={username:"",password:""};var P=Object(d.b)(null,{login:function(e){return function(t){t({type:m}),h.a.post("https://watermyplantsbuildweek.herokuapp.com/api/auth/login",e).then((function(e){t({type:f,payload:e.data})})).catch((function(e){t({type:x,payload:e})})).finally((function(){t({type:y})}))}}})((function(e){var t=e.login,n=j(L),a=Object(i.a)(n,2),c=a[0],r=a[1],s=Object(o.f)().push,l=T(c,C,r),u=Object(i.a)(l,3),d=u[0],b=u[1],h=u[2];return Object(U.jsx)("div",{children:Object(U.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t(c),s("/plantlist")},children:[Object(U.jsxs)("label",{children:["Username:",Object(U.jsx)("input",{onChange:h,type:"text",name:"username",value:c.username})]}),Object(U.jsxs)("label",{children:["Password:",Object(U.jsx)("input",{onChange:h,type:"password",name:"password",value:c.password})]}),Object(U.jsx)("button",{disabled:d,type:"submit",children:"Login"}),Object(U.jsx)(A,{formErrors:b})]})})})),R=q.b().shape({username:q.d().required("Username is required"),password:q.d().required("Password is required"),phoneNumber:q.a()}),I={username:"",phoneNumber:"",password:""};var D=Object(d.b)(null,{signUp:function(e){return function(t){t({type:m}),h.a.post("https://watermyplantsbuildweek.herokuapp.com/api/auth/register",e).then((function(e){console.log(e),t({type:f,payload:e.data})})).catch((function(e){t({type:x,payload:e})})).finally((function(){t({type:y})}))}}})((function(e){var t=e.signUp,n=Object(o.f)().push,a=j(I),c=Object(i.a)(a,2),r=c[0],s=c[1],l=T(r,R,s),u=Object(i.a)(l,3),d=u[0],b=u[1],h=u[2];return console.log(r),Object(U.jsx)("div",{children:Object(U.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t(r),n("/plantlist")},children:[Object(U.jsxs)("label",{children:["Username:",Object(U.jsx)("input",{onChange:h,value:r.username,type:"text",name:"username"})]}),Object(U.jsxs)("label",{children:["Phone Number:",Object(U.jsx)("input",{onChange:h,value:r.phoneNumber,type:"tel",name:"phoneNumber"})]}),Object(U.jsxs)("label",{children:["Password:",Object(U.jsx)("input",{onChange:h,value:r.password,type:"password",name:"password"})]}),Object(U.jsx)("button",{disabled:d,type:"submit",children:"Sign Up"}),Object(U.jsx)(A,{formErrors:b})]})})})),F=6e4,W=36e5,_=864e5,H=function(e){var t=Object(a.useState)(e()),n=Object(i.a)(t,2),c=n[0],r=n[1],s=function(){return Math.floor(c%F/1e3)},o=function(){return Math.floor(c%W/F)},l=function(){return Math.floor(c%_/W)},u=function(){return Math.floor(c/_)},j=Object(a.useState)(u()),d=Object(i.a)(j,2),b=d[0],h=d[1],p=Object(a.useState)(l()),O=Object(i.a)(p,2),m=O[0],f=O[1],x=Object(a.useState)(o()),y=Object(i.a)(x,2),v=y[0],g=y[1],w=Object(a.useState)(s()),N=Object(i.a)(w,2),k=N[0],S=N[1],E=Object(a.useState)(0),q=Object(i.a)(E,2),T=q[0],C=q[1];return Object(a.useEffect)((function(){var e=setInterval((function(){C((function(e){return e+1}))}),1e3);return function(){clearInterval(e)}}),[]),Object(a.useEffect)((function(){r(e()),h(u()),f(l()),g(o()),S(s())}),[T]),[b,m,v,k,c]};var M=Object(d.b)(null,{deletePlant:function(e){return function(t){t({type:m}),p().delete("/api/plants/".concat(e)).then((function(n){t({type:N,payload:e})})).catch((function(e){t({type:x,payload:e})})).finally((function(){t({type:y})}))}}})((function(e){var t=e.id,n=e.nickname,a=e.species,c=e.h2oFrequency,r=e.deletePlant,l=e.lastWaterTime,u=void 0===l?new Date("Aug 24, 2021 16:37:52").getTime():l,j=Object(o.g)().url,d=864e5*c,b=Date.now()-u,h=H((function(){return d-b})),p=Object(i.a)(h,5),O=p[0],m=p[1],f=p[2],x=p[3],y=p[4];return Object(U.jsxs)("div",{className:"border rounded-lg flex w-1/4 m-4 shadow-lg  bg-green-300",children:[Object(U.jsxs)("div",{className:"flex flex-col p-6",children:[Object(U.jsx)("h3",{className:"text-2xl text-left font-bold",children:n}),Object(U.jsx)("h6",{className:"text-lg text-left italic",children:a}),Object(U.jsxs)("h6",{className:"text-sm text-left",children:["Water Frequency: ",c," days"]}),y>0?Object(U.jsxs)("h6",{className:"text-sm text-left animate-pulse",children:[O," days, ",Object(U.jsx)("br",{}),m," hours, ",Object(U.jsx)("br",{}),f," minutues, ",Object(U.jsx)("br",{}),x," seconds. ",Object(U.jsx)("br",{})]}):Object(U.jsx)("h2",{children:"Water it!!!"}),Object(U.jsx)("button",{onClick:function(){},className:"border ml-16 text-md bg-blue-200 hover:bg-blue-300 mt-4 p-2 rounded-md w-2/3",children:"Water Plant"})]}),Object(U.jsx)("div",{"data-testid":"delete",onClick:function(){return r(t)},className:"cursor-pointer p-2",children:" \u274c"}),Object(U.jsx)(s.b,{to:"".concat(j,"/update/").concat(t),className:"cursor-pointer p-2",children:"\u270f\ufe0f"})]})})),G=q.b().shape({nickname:q.d().trim().required("Nickname is required").min(2,"Nickname must be at least 2 characters"),species:q.d().trim().required("Species is required"),h2oFrequency:q.d().oneOf(["1","3","5","7"],"Water Frequency is required")}),B={id:"",nickname:"",species:"",h2oFrequency:""};var z=Object(d.b)(null,{addPlant:function(e){return function(t){t({type:m}),p().post("/api/plants",e).then((function(e){t({type:k,payload:e.data})})).catch((function(e){t({type:x,payload:e})})).finally((function(){t({type:y})}))}}})((function(e){var t=e.addPlant,n=j(B),a=Object(i.a)(n,2),c=a[0],r=a[1],s=T(c,G,r),o=Object(i.a)(s,3),l=o[0],u=o[1],d=o[2];return Object(U.jsxs)("section",{children:["\u25bc",Object(U.jsxs)("form",{className:" p-8 flex flex-col border-8",onSubmit:function(e){e.preventDefault(),t(c)},children:[Object(U.jsxs)("label",{className:" text-lg font-bold flex flex-col items-center justify-center",children:["What is your plant's nickname?",Object(U.jsx)("input",{className:"border-4",name:"nickname",type:"text",placeholder:"Add Nickname",value:c.nickname,onChange:d})]}),Object(U.jsxs)("label",{className:" text-lg font-bold  flex flex-col items-center justify-center",children:["What species is the plant?",Object(U.jsx)("input",{className:"border-4",type:"text",placeholder:"Add Species",name:"species",value:c.species,onChange:d}),Object(U.jsxs)("label",{className:" text-lg font-bold flex flex-col items-center justify-center",children:["How often do you give it water?",Object(U.jsxs)("select",{className:"border-4",name:"h2oFrequency",value:c.h2oFrequency,onChange:d,children:[Object(U.jsx)("option",{value:"",children:"--Select an Option--"}),Object(U.jsx)("option",{value:"1",children:"Everyday"}),Object(U.jsx)("option",{value:"3",children:"Every three days"}),Object(U.jsx)("option",{value:"5",children:"Every five days"}),Object(U.jsx)("option",{value:"7",children:"Once a week"})]}),Object(U.jsx)("button",{disabled:l,className:"border m-4 p-2 text-md bg-yellow-200 hover:bg-yellow-300 rounded-md",children:"Submit"}),Object(U.jsx)(A,{formErrors:u})]})]})]})]})}));var Q=Object(d.b)((function(e){return{plants:e.plants}}),{getPlants:function(){return function(e){e({type:m}),p().get("/api/plants").then((function(t){e({type:g,payload:t.data})})).catch((function(t){e({type:x,payload:t})})).finally((function(){e({type:y})}))}}})((function(e){var t=e.getPlants,n=e.plants;Object(a.useEffect)((function(){t()}),[]);var c=Object(a.useState)(!1),r=Object(i.a)(c,2),s=r[0],o=r[1];return Object(U.jsxs)("div",{className:"flex w-90 justify-center flex-col text-center items-center mt-10",children:[Object(U.jsx)("h2",{className:"text-5xl font-bold m-4",children:" Your Garden "}),Object(U.jsx)("button",{onClick:function(){return o(!s)},className:"border p-2 text-md bg-yellow-200 hover:bg-yellow-300 rounded-md",children:"Add A Plant"}),s&&Object(U.jsx)(z,{}),Object(U.jsx)("div",{className:"w-11/12 mt-6 h-full border-8 flex-wrap flex justify-center items-start",children:null===n||void 0===n?void 0:n.map((function(e){return Object(a.createElement)(M,Object(u.a)(Object(u.a)({},e),{},{key:e.id}))}))})]})}));var V=function(e){return Object(U.jsxs)("div",{className:"body",children:[Object(U.jsx)("div",{className:"hero-image",children:Object(U.jsxs)("div",{className:"hero-content",children:[Object(U.jsx)("h2",{children:"Water, worry-free!"}),Object(U.jsx)("p",{children:"Sign up below to get consistent reminders to keep your plants happy and healthy..."}),Object(U.jsx)("button",{children:"Sign up Today!"})]})}),Object(U.jsx)("div",{className:"spacer"}),Object(U.jsxs)("div",{className:"IconRow",children:[Object(U.jsx)("div",{className:"Icon",children:Object(U.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 logo",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(U.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),Object(U.jsx)("div",{className:"iconRowContent",children:Object(U.jsx)("p",{className:"rowContent",children:"Simply add your plants, their names, and their watering frequency to start keeping track of your watering schedule"})})]}),Object(U.jsxs)("div",{className:"IconRow",children:[Object(U.jsx)("div",{className:"Icon",children:Object(U.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 logo",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(U.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 3l-6 6m0 0V4m0 5h5M5 3a2 2 0 00-2 2v1c0 8.284 6.716 15 15 15h1a2 2 0 002-2v-3.28a1 1 0 00-.684-.948l-4.493-1.498a1 1 0 00-1.21.502l-1.13 2.257a11.042 11.042 0 01-5.516-5.517l2.257-1.128a1 1 0 00.502-1.21L9.228 3.683A1 1 0 008.279 3H5z"})})}),Object(U.jsx)("div",{className:"iconRowContent",children:Object(U.jsx)("p",{className:"rowContent",children:"Get phone notifications when your plants are thirsty and ready to be watered!"})})]}),Object(U.jsxs)("div",{className:"IconRow",children:[Object(U.jsx)("div",{className:"Icon",children:Object(U.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 logo",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(U.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.06L7 20m7-10V5a2 2 0 00-2-2h-.095c-.5 0-.905.405-.905.905 0 .714-.211 1.412-.608 2.006L7 11v9m7-10h-2M7 20H5a2 2 0 01-2-2v-6a2 2 0 012-2h2.5"})})}),Object(U.jsx)("div",{className:"iconRowContent",children:Object(U.jsx)("p",{className:"rowContent",children:"Relax and enjoy the lucious foliage of your plants as all of your watering schedule needs are handled for you!"})})]})]})},J=q.b().shape({phonenumber:q.a()}),K={phonenumber:""};var Y=Object(d.b)(null,{updateUser:S})((function(e){var t=j(K),n=Object(i.a)(t,2),a=n[0],c=n[1],r=T(a,J,c),s=Object(i.a)(r,3),o=s[0],l=s[1],u=s[2];return Object(U.jsx)("div",{children:Object(U.jsxs)("form",{onSubmit:function(e){e.preventDefault(),S(a)},children:[Object(U.jsxs)("label",{children:["New Phone Number:",Object(U.jsx)("input",{onChange:u,type:"tel",name:"phonenumber",value:a.phonenumber})]}),Object(U.jsx)(A,{formErrors:l}),Object(U.jsx)("button",{disabled:o,type:"submit",children:"Update"})]})})}));var Z=Object(d.b)((function(e){return{authenticated:e.authenticated}}))((function(e){var t=e.authenticated;return Object(U.jsxs)("div",{children:[Object(U.jsx)("header",{className:"Header-bar",children:Object(U.jsx)("nav",{className:"Nav-bar",children:t?Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(s.b,{children:"Logout"}),Object(U.jsx)(s.b,{to:"/updateuser",children:"Update User"}),Object(U.jsx)(s.b,{to:"/plantlist",children:"Plant List"})]}):Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(s.b,{to:"/login",children:Object(U.jsx)("button",{children:"Login"})}),Object(U.jsx)(s.b,{to:"/signup",children:Object(U.jsx)("button",{children:"Sign Up"})})]})})}),Object(U.jsxs)(o.c,{children:[Object(U.jsx)(o.a,{path:"/login",children:Object(U.jsx)(P,{})}),Object(U.jsx)(o.a,{path:"/signup",children:Object(U.jsx)(D,{})}),Object(U.jsx)(o.a,{path:"/plantlist",children:Object(U.jsx)(Q,{})}),Object(U.jsx)(o.a,{path:"/updateuser",children:Object(U.jsx)(Y,{})}),Object(U.jsx)(o.a,{exact:!0,path:"/",children:Object(U.jsx)(V,{})})]})]})})),X=n(51),$=n(85),ee=n(86),te=n.n(ee),ne=n(10),ae=[{id:1,nickname:"Dan",species:"Sunflower",h2oFrequency:"7"},{id:2,nickname:"Steve",species:"Daisy",h2oFrequency:"1"},{id:3,nickname:"Roger",species:"Rose",h2oFrequency:"3"}],ce=(new Date("Aug 24, 2021 16:37:52").getTime(),{authenticated:localStorage.getItem("token")||!1,makingRequest:!1,plants:ae,plantToUpdate:{}}),re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return Object(u.a)(Object(u.a)({},e),{},{authenticated:t.payload});case m:return Object(u.a)(Object(u.a)({},e),{},{makingRequest:!0});case y:return Object(u.a)(Object(u.a)({},e),{},{makingRequest:!1});case f:return localStorage.setItem("token",t.payload.created_at),Object(u.a)(Object(u.a)({},e),{},{authenticated:!0});case k:return Object(u.a)(Object(u.a)({},e),{},{plants:[].concat(Object(ne.a)(e.plants),[t.payload])});case g:return Object(u.a)(Object(u.a)({},e),{},{plants:t.payload});case w:return Object(u.a)(Object(u.a)({},e),{},{plantToUpdate:t.payload});case N:return Object(u.a)(Object(u.a)({},e),{},{plants:e.plants.filter((function(e){return e.id!==t.payload}))});case v:return Object(u.a)(Object(u.a)({},e),{},{plants:e.plants.map((function(e){return e.id!==t.payload.id?e:t.payload}))});case E:return localStorage.removeItem("token"),Object(u.a)(Object(u.a)({},e),{},{authenticated:!1,makingRequest:!1});default:return e}},se=Object(X.b)(re,Object(X.a)($.a,te.a));r.a.render(Object(U.jsx)(d.a,{store:se,children:Object(U.jsx)(s.a,{children:Object(U.jsx)(Z,{})})}),document.getElementById("root"))},91:function(e,t,n){},92:function(e,t,n){}},[[214,1,2]]]);
//# sourceMappingURL=main.5f9587b3.chunk.js.map